# 函数式编程原则应用

函数式编程最近受到主流编程社区的重新关注，其中一部分原因是函数式编程范式的新兴特性很好地适应了我们行业向多核心的转变所带来的挑战。然而，虽然这确实是一个重要的应用，但这并不是本文告诫你了解你的函数式编程的原因。

掌握函数式编程范式可以大大提高你在其他环境中编写代码的质量。如果你深入理解并应用函数式范式，你的设计将表现出更高程度的引用透明性。

引用透明性是一种非常理想的属性：它意味着在相同的输入情况下，函数的结果始终保持一致，无论它们在何时何地被调用。也就是说，函数的计算结果依赖于可变状态的副作用越少越好——理想情况下根本不依赖。

在命令式代码中，可变变量是缺陷的主要原因之一。所有阅读这篇文章的人都曾调查过为什么某个值在特定情况下与预期不同。可见性语义可以帮助缓解这些隐匿的缺陷，或者至少大大缩小它们的位置范围，但它们的真正罪魁祸首可能是使用了过多可变性的设计。

而在这方面，我们确实没有得到行业的太多帮助。面向对象的介绍在暗示这种设计，因为它们经常展示由相对长寿的对象组成的图形示例，这些对象愉快地调用彼此的改变器方法，这可能是危险的。然而，通过敏锐的测试驱动设计，尤其是要确保["Mock Roles, not Objects"](https://www.jmock.org/oopsla2004.pdf)，可以设计掉不必要的可变性。

最终的结果是，设计通常具有更好的职责分配，具有更多、更小的函数，这些函数作用于传递给它们的参数，而不是引用可变成员变量。缺陷会更少，而且通常更容易调试，因为在这些设计中定位不良值的引入位置比推断导致错误赋值的特定上下文要容易得多。这加起来就是更高程度的引用透明性，而学习函数式编程语言会更深入地了解这种计算模型是如何运作的。

当然，在所有情况下，这种方法并不总是最佳的。例如，在面向对象系统中，这种风格通常与领域模型开发（即协作服务于分解业务规则的复杂性）相比，与用户界面开发产生更好的结果。

掌握函数式编程范式，以便能够审慎地将所学到的教训应用于其他领域。您的对象系统（至少其中之一）将会产生引用透明性的好处，并且比许多人想象的要接近其函数式对应物。事实上，有人甚至声称，函数式编程和面向对象编程的顶点仅仅是彼此的一种反映，是一种计算上的阴阳。

By [Edward Garson](http://programmer.97things.oreilly.com/wiki/index.php/Edward_Garson)
