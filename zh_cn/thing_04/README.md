# 自动化你的编码标准

你可能也有这样的经历。在项目开始时，每个人都有很多好意愿，我们可以称之为“新项目决议”。通常，其中许多决议都写在文件中。有关代码的那些最终会出现在项目的编码标准中。在启动会议上，首席开发人员会仔细阅读该文件，并在最好的情况下，每个人都同意尝试遵循它们。但是一旦项目启动，这些良好的意图就会一个接一个地被抛弃。最终交付项目时，代码看起来像一团糟，似乎没有人知道它是怎么变成这样的。

事情何时出错了？可能已经在启动会议上。一些项目成员没有关注。其他人不理解重点。更糟糕的是，一些人持不同意见，已经在计划他们的编码标准反叛了。最后，一些人明白了重点，并同意，但是当项目的压力变得太大时，他们不得不放弃一些东西。格式良好的代码并不能为想要更多功能的客户赢得额外的点数。此外，如果没有自动化，遵循编码标准可能是一项相当无聊的任务。尝试手动缩进混乱的类以自己找出来吧。

但是，如果这是个问题，为什么我们首先想要有一个编码标准呢？一种统一代码格式的原因是，没有人可以通过以他或她的私有方式格式化它来“拥有”代码片段。我们可能想要防止开发人员使用某些反模式，以避免一些常见的错误。总之，编码标准应该使项目更容易操作，并从一开始就维护开发速度。因此，每个人都应同意编码标准-如果一个开发人员使用三个空格来缩进代码，而另一个使用四个空格，那并没有帮助。

存在许多工具可以用来生成代码质量报告，并记录和维护编码标准，但这并不是整个解决方案。应该在可能的情况下自动化并执行它。以下是一些示例：

- 确保代码格式化是构建过程的一部分，以便每个人在编译代码时自动运行它。

- 使用静态代码分析工具扫描代码以查找不需要的反模式。如果找到任何反模式，请中止构建过程。

- 学习配置这些工具，以便您可以扫描您自己的项目特定反模式。

- 不仅要测量测试覆

- 确保代码格式是构建过程的一部分，这样每次编译代码时，所有人都会自动运行它。

  使用静态代码分析工具扫描代码中的不需要的反模式。如果发现了任何问题，请打断构建过程。

  学会配置这些工具，以便可以扫描项目特定的反模式。

  不仅要衡量测试覆盖率，还要自动检查结果。如果测试覆盖率太低，请再次打断构建过程。

  尽量做到这一点，您可能无法自动标记或修复真正关心的所有内容。至于那些无法自动标记或修复的问题，请将它们视为补充到自动化编码标准的指南，并接受您和同事可能不会如此认真遵守它们的事实。

  最后，编码标准应该是动态的而不是静态的。随着项目的发展，项目的需求会发生变化，一开始可能看起来很聪明的决策，几个月后可能就不再明智了。

By [Filip van Laenen](http://programmer.97things.oreilly.com/wiki/index.php/Filip_van_Laenen)